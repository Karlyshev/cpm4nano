  ; 8080 assembler code

	                        .hexfile test.hex

	                        .binfile test.com

	                        ; try "hex" for downloading in hex format

	                        .download bin  

	                        .objcopy gobjcopy

	                        .postbuild echo "Hooray!"

	                        ;.nodump

	                ;***********************************************************************

	                ; MICROCOSM ASSOCIATES  8080/8085 CPU DIAGNOSTIC VERSION 1.0  (C) 1980

	                ;***********************************************************************

	                ; Load into virtual altair with: ALTAIR L=TEST.HEX

	                ; Then press F2 to view screen, and 'G' to execute the test.

	                ;

	                ;DONATED TO THE "SIG/M" CP/M USER'S GROUP BY:

	                ;KELLY SMITH, MICROCOSM ASSOCIATES

	                ;3055 WACO AVENUE

	                ;SIMI VALLEY, CALIFORNIA, 93065

	                ;(805) 527-9321 (MODEM, CP/M-NET (TM))

	                ;(805) 527-0518 (VERBAL)

	                ;

	                        CPU 8080    

	                        ORG 00100H

	                

0100	21 09 01                LXI     H, LOLZ

0103	CD 51 01                CALL    MSG

0106	C3 BD 01                JMP     CPU ;JUMP TO 8080 CPU DIAGNOSTIC

	                ;

0109	4D 49 43 52     LOLZ:   DB  "MICROCOSM ASSOCIATES 8080/8085 CPU DIAGNOSTIC VERSION 1.0  (C) 1980", 0dh, 0ah, 24h
	. . . 
014D	24 

	                ;

	                BDOS    EQU     00005H  ;BDOS ENTRY TO CP/M

014E	C3 00 00        WBOOT:  JMP     0

	                ;

	                ;MESSAGE OUTPUT ROUTINE

	                ;

0151	7E              MSG:    MOV A,M ; Get data

0152	FE 24                   CPI '$' ; End?

0154	C8                      RZ

0155	CD 5C 01                CALL    PCHAR   ; Output

0158	23                      INX H   ; Next

0159	C3 51 01                JMP MSG ; Do all

	                ;

	                ;

	                ;CHARACTER OUTPUT ROUTINE

	                ;

015C	F5              PCHAR:  PUSH    PSW

015D	D5                      PUSH    D

015E	E5                      PUSH    H

015F	5F                      MOV E,A

0160	0E 02                   MVI C,2

0162	CD 05 00                CALL    BDOS

0165	E1                      POP     H

0166	D1                      POP D

0167	F1                      POP PSW

0168	C9                      RET

	                ;

	                ;

	                ;

0169	F5              BYTEO:  PUSH    PSW

016A	CD 79 01                CALL    BYTO1

016D	5F                      MOV E,A

016E	CD 5C 01                CALL    PCHAR

0171	F1                      POP PSW

0172	CD 7D 01                CALL    BYTO2

0175	5F                      MOV E,A

0176	C3 5C 01                JMP PCHAR

0179	0F              BYTO1:  RRC

017A	0F                      RRC

017B	0F                      RRC

017C	0F                      RRC

017D	E6 0F           BYTO2:  ANI 0FH

017F	FE 0A                   CPI 0AH

0181	FA 86 01                JM  BYTO3

0184	C6 07                   ADI 7

0186	C6 30           BYTO3:  ADI 30H

0188	C9                      RET

	                ;

	                ;

	                ;

	                ;************************************************************

	                ;           MESSAGE TABLE FOR OPERATIONAL CPU TEST

	                ;************************************************************

	                ;

0189	0D 0A           OKCPU:  DB  0DH,0AH

018B	43 50 55 20             DB  "CPU IS OPERATIONAL$"
	. . . 
019B	41 4C 24 

	                ;

019E	0D 0A           NGCPU:  DB  0DH,0AH

01A0	20 43 50 55             DB  " CPU HAS FAILED!    ERROR EXIT=$"
	. . . 
01BC	24 

	                ;

	                ;

	                ;

	                ;************************************************************

	                ;                8080/8085 CPU TEST/DIAGNOSTIC

	                ;************************************************************

	                ;

	                ;NOTE: (1) PROGRAM ASSUMES "CALL",AND "LXI SP" INSTRUCTIONS WORK!

	                ;

	                ;      (2) INSTRUCTIONS NOT TESTED ARE "HLT","DI","EI",

	                ;          AND "RST 0" THRU "RST 7"

	                ;

	                ;

	                ;

	                ;TEST JUMP INSTRUCTIONS AND FLAGS

	                ;

01BD	31 BF 06        CPU:    LXI SP,STACK    ;SET THE STACK POINTER

01C0	E6 00                   ANI 0   ;INITIALIZE A REG. AND CLEAR ALL FLAGS

01C2	CA C8 01                JZ  J010    ;TEST "JZ"

01C5	CD 9B 06                CALL    CPUER

01C8	D2 CE 01        J010:   JNC J020    ;TEST "JNC"

01CB	CD 9B 06                CALL    CPUER

01CE	EA D4 01        J020:   JPE J030    ;TEST "JPE"

01D1	CD 9B 06                CALL    CPUER

01D4	F2 DA 01        J030:   JP  J040    ;TEST "JP"

01D7	CD 9B 06                CALL    CPUER

01DA	C2 E9 01        J040:   JNZ J050    ;TEST "JNZ"

01DD	DA E9 01                JC  J050    ;TEST "JC"

01E0	E2 E9 01                JPO J050    ;TEST "JPO"

01E3	FA E9 01                JM  J050    ;TEST "JM"

01E6	C3 EC 01                JMP J060    ;TEST "JMP" (IT'S A LITTLE LATE,BUT WHAT THE HELL!

01E9	CD 9B 06        J050:   CALL    CPUER

01EC	C6 06           J060:   ADI 6   ;A=6,C=0,P=1,S=0,Z=0

01EE	C2 F4 01                JNZ J070    ;TEST "JNZ"

01F1	CD 9B 06                CALL    CPUER

01F4	DA FD 01        J070:   JC  J080    ;TEST "JC"

01F7	E2 FD 01                JPO J080    ;TEST "JPO"

01FA	F2 00 02                JP  J090    ;TEST "JP"

01FD	CD 9B 06        J080:   CALL    CPUER

0200	C6 70           J090:   ADI 070H    ;A=76H,C=0,P=0,S=0,Z=0

0202	E2 08 02                JPO J100    ;TEST "JPO"

0205	CD 9B 06                CALL    CPUER

0208	FA 11 02        J100:   JM  J110    ;TEST "JM"

020B	CA 11 02                JZ  J110    ;TEST "JZ"

020E	D2 14 02                JNC J120    ;TEST "JNC"

0211	CD 9B 06        J110:   CALL    CPUER

0214	C6 81           J120:   ADI 081H    ;A=F7H,C=0,P=0,S=1,Z=0

0216	FA 1C 02                JM  J130    ;TEST "JM"

0219	CD 9B 06                CALL    CPUER

021C	CA 25 02        J130:   JZ  J140    ;TEST "JZ"

021F	DA 25 02                JC  J140    ;TEST "JC"

0222	E2 28 02                JPO J150    ;TEST "JPO"

0225	CD 9B 06        J140:   CALL    CPUER

0228	C6 FE           J150:   ADI 0FEH    ;A=F5H,C=1,P=1,S=1,Z=0

022A	DA 30 02                JC  J160    ;TEST "JC"

022D	CD 9B 06                CALL    CPUER

0230	CA 39 02        J160:   JZ  J170    ;TEST "JZ"

0233	E2 39 02                JPO J170    ;TEST "JPO"

0236	FA 3C 02                JM  AIMM    ;TEST "JM"

0239	CD 9B 06        J170:   CALL    CPUER

	                ;

	                ;

	                ;

	                ;TEST ACCUMULATOR IMMEDIATE INSTRUCTIONS

	                ;

023C	FE 00           AIMM:   CPI 0   ;A=F5H,C=0,Z=0

023E	DA 54 02                JC  CPIE    ;TEST "CPI" FOR RE-SET CARRY

0241	CA 54 02                JZ  CPIE    ;TEST "CPI" FOR RE-SET ZERO

0244	FE F5                   CPI 0F5H    ;A=F5H,C=0,Z=1

0246	DA 54 02                JC  CPIE    ;TEST "CPI" FOR RE-SET CARRY ("ADI")

0249	C2 54 02                JNZ CPIE    ;TEST "CPI" FOR RE-SET ZERO

024C	FE FF                   CPI 0FFH    ;A=F5H,C=1,Z=0

024E	CA 54 02                JZ  CPIE    ;TEST "CPI" FOR RE-SET ZERO

0251	DA 57 02                JC  ACII    ;TEST "CPI" FOR SET CARRY

0254	CD 9B 06        CPIE:   CALL    CPUER

0257	CE 0A           ACII:   ACI 00AH    ;A=F5H+0AH+CARRY(1)=0,C=1

0259	CE 0A                   ACI 00AH    ;A=0+0AH+CARRY(0)=0BH,C=0

025B	FE 0B                   CPI 00BH

025D	CA 63 02                JZ  SUII    ;TEST "ACI"

0260	CD 9B 06                CALL    CPUER

0263	D6 0C           SUII:   SUI 00CH    ;A=FFH,C=0

0265	D6 0F                   SUI 00FH    ;A=F0H,C=1

0267	FE F0                   CPI 0F0H

0269	CA 6F 02                JZ  SBII    ;TEST "SUI"

026C	CD 9B 06                CALL    CPUER

026F	DE F1           SBII:   SBI 0F1H    ;A=F0H-0F1H-CARRY(0)=FFH,C=1

0271	DE 0E                   SBI 00EH    ;A=FFH-OEH-CARRY(1)=F0H,C=0

0273	FE F0                   CPI 0F0H

0275	CA 7B 02                JZ  ANII    ;TEST "SBI"

0278	CD 9B 06                CALL    CPUER

027B	E6 55           ANII:   ANI 055H    ;A=F0H55H=50H,C=0,P=1,S=0,Z=0

027D	FE 50                   CPI 050H

027F	CA 85 02                JZ  ORII    ;TEST "ANI"

0282	CD 9B 06                CALL    CPUER

0285	F6 3A           ORII:   ORI 03AH    ;A=50H3AH=7AH,C=0,P=0,S=0,Z=0

0287	FE 7A                   CPI 07AH

0289	CA 8F 02                JZ  XRII    ;TEST "ORI"

028C	CD 9B 06                CALL    CPUER

028F	EE 0F           XRII:   XRI 00FH    ;A=7AH0FH=75H,C=0,P=0,S=0,Z=0

0291	FE 75                   CPI 075H

0293	CA 99 02                JZ  C010    ;TEST "XRI"

0296	CD 9B 06                CALL    CPUER

	                ;

	                ;

	                ;

	                ;TEST CALLS AND RETURNS

	                ;

0299	E6 00           C010:   ANI 000H    ;A=0,C=0,P=1,S=0,Z=1

029B	DC 9B 06                CC  CPUER   ;TEST "CC"

029E	E4 9B 06                CPO CPUER   ;TEST "CPO"

02A1	FC 9B 06                CM  CPUER   ;TEST "CM"

02A4	C4 9B 06                CNZ CPUER   ;TEST "CNZ"

02A7	FE 00                   CPI 000H

02A9	CA AF 02                JZ  C020    ;A=0,C=0,P=0,S=0,Z=1

02AC	CD 9B 06                CALL    CPUER

02AF	D6 77           C020:   SUI 077H    ;A=89H,C=1,P=0,S=1,Z=0

02B1	D4 9B 06                CNC CPUER   ;TEST "CNC"

02B4	EC 9B 06                CPE CPUER   ;TEST "CPE"

02B7	F4 9B 06                CP  CPUER   ;TEST "CP"

02BA	CC 9B 06                CZ  CPUER   ;TEST "CZ"

02BD	FE 89                   CPI 089H

02BF	CA C5 02                JZ  C030    ;TEST FOR "CALLS" TAKING BRANCH

02C2	CD 9B 06                CALL    CPUER

02C5	E6 FF           C030:   ANI 0FFH    ;SET FLAGS BACK!

02C7	E4 D2 02                CPO CPOI    ;TEST "CPO"

02CA	FE D9                   CPI 0D9H

02CC	CA 2F 03                JZ  MOVI    ;TEST "CALL" SEQUENCE SUCCESS

02CF	CD 9B 06                CALL    CPUER

02D2	E8              CPOI:   RPE     ;TEST "RPE"

02D3	C6 10                   ADI 010H    ;A=99H,C=0,P=0,S=1,Z=0

02D5	EC DE 02                CPE CPEI    ;TEST "CPE"

02D8	C6 02                   ADI 002H    ;A=D9H,C=0,P=0,S=1,Z=0

02DA	E0                      RPO     ;TEST "RPO"

02DB	CD 9B 06                CALL    CPUER

02DE	E0              CPEI:   RPO     ;TEST "RPO"

02DF	C6 20                   ADI 020H    ;A=B9H,C=0,P=0,S=1,Z=0

02E1	FC EA 02                CM  CMI ;TEST "CM"

02E4	C6 04                   ADI 004H    ;A=D7H,C=0,P=1,S=1,Z=0

02E6	E8                      RPE     ;TEST "RPE"

02E7	CD 9B 06                CALL    CPUER

02EA	F0              CMI:    RP      ;TEST "RP"

02EB	C6 80                   ADI 080H    ;A=39H,C=1,P=1,S=0,Z=0

02ED	F4 F6 02                CP  TCPI    ;TEST "CP"

02F0	C6 80                   ADI 080H    ;A=D3H,C=0,P=0,S=1,Z=0

02F2	F8                      RM      ;TEST "RM"

02F3	CD 9B 06                CALL    CPUER

02F6	F8              TCPI:   RM      ;TEST "RM"

02F7	C6 40                   ADI 040H    ;A=79H,C=0,P=0,S=0,Z=0

02F9	D4 02 03                CNC CNCI    ;TEST "CNC"

02FC	C6 40                   ADI 040H    ;A=53H,C=0,P=1,S=0,Z=0

02FE	F0                      RP      ;TEST "RP"

02FF	CD 9B 06                CALL    CPUER

0302	D8              CNCI:   RC      ;TEST "RC"

0303	C6 8F                   ADI 08FH    ;A=08H,C=1,P=0,S=0,Z=0

0305	DC 0E 03                CC  CCI ;TEST "CC"

0308	D6 02                   SUI 002H    ;A=13H,C=0,P=0,S=0,Z=0

030A	D0                      RNC     ;TEST "RNC"

030B	CD 9B 06                CALL    CPUER

030E	D0              CCI:    RNC     ;TEST "RNC"

030F	C6 F7                   ADI 0F7H    ;A=FFH,C=0,P=1,S=1,Z=0

0311	C4 1A 03                CNZ CNZI    ;TEST "CNZ"

0314	C6 FE                   ADI 0FEH    ;A=15H,C=1,P=0,S=0,Z=0

0316	D8                      RC      ;TEST "RC"

0317	CD 9B 06                CALL    CPUER

031A	C8              CNZI:   RZ      ;TEST "RZ"

031B	C6 01                   ADI 001H    ;A=00H,C=1,P=1,S=0,Z=1

031D	CC 26 03                CZ  CZI ;TEST "CZ"

0320	C6 D0                   ADI 0D0H    ;A=17H,C=1,P=1,S=0,Z=0

0322	C0                      RNZ     ;TEST "RNZ"

0323	CD 9B 06                CALL    CPUER

0326	C0              CZI:    RNZ     ;TEST "RNZ"

0327	C6 47                   ADI 047H    ;A=47H,C=0,P=1,S=0,Z=0

0329	FE 47                   CPI 047H    ;A=47H,C=0,P=1,S=0,Z=1

032B	C8                      RZ      ;TEST "RZ"

032C	CD 9B 06                CALL    CPUER

	                ;

	                ;

	                ;

	                ;TEST "MOV","INR",AND "DCR" INSTRUCTIONS

	                ;

032F	3E 77           MOVI:   MVI A,077H

0331	3C                      INR A

0332	47                      MOV B,A

0333	04                      INR B

0334	48                      MOV C,B

0335	0D                      DCR C

0336	51                      MOV D,C

0337	5A                      MOV E,D

0338	63                      MOV H,E

0339	6C                      MOV L,H

033A	7D                      MOV A,L ;TEST "MOV" A,L,H,E,D,C,B,A

033B	3D                      DCR A

033C	4F                      MOV C,A

033D	59                      MOV E,C

033E	6B                      MOV L,E

033F	45                      MOV B,L

0340	50                      MOV D,B

0341	62                      MOV H,D

0342	7C                      MOV A,H ;TEST "MOV" A,H,D,B,L,E,C,A

0343	57                      MOV D,A

0344	14                      INR D

0345	6A                      MOV L,D

0346	4D                      MOV C,L

0347	0C                      INR C

0348	61                      MOV H,C

0349	44                      MOV B,H

034A	05                      DCR B

034B	58                      MOV E,B

034C	7B                      MOV A,E ;TEST "MOV" A,E,B,H,C,L,D,A

034D	5F                      MOV E,A

034E	1C                      INR E

034F	43                      MOV B,E

0350	60                      MOV H,B

0351	24                      INR H

0352	4C                      MOV C,H

0353	69                      MOV L,C

0354	55                      MOV D,L

0355	15                      DCR D

0356	7A                      MOV A,D ;TEST "MOV" A,D,L,C,H,B,E,A

0357	67                      MOV H,A

0358	25                      DCR H

0359	54                      MOV D,H

035A	42                      MOV B,D

035B	68                      MOV L,B

035C	2C                      INR L

035D	5D                      MOV E,L

035E	1D                      DCR E

035F	4B                      MOV C,E

0360	79                      MOV A,C ;TEST "MOV" A,C,E,L,B,D,H,A

0361	6F                      MOV L,A

0362	2D                      DCR L

0363	65                      MOV H,L

0364	5C                      MOV E,H

0365	53                      MOV D,E

0366	4A                      MOV C,D

0367	41                      MOV B,C

0368	78                      MOV A,B

0369	FE 77                   CPI 077H

036B	C4 9B 06                CNZ CPUER   ;TEST "MOV" A,B,C,D,E,H,L,A

	                ;

	                ;

	                ;

	                ;TEST ARITHMETIC AND LOGIC INSTRUCTIONS

	                ;

036E	AF                      XRA A

036F	06 01                   MVI B,001H

0371	0E 03                   MVI C,003H

0373	16 07                   MVI D,007H

0375	1E 0F                   MVI E,00FH

0377	26 1F                   MVI H,01FH

0379	2E 3F                   MVI L,03FH

037B	80                      ADD B

037C	81                      ADD C

037D	82                      ADD D

037E	83                      ADD E

037F	84                      ADD H

0380	85                      ADD L

0381	87                      ADD A

0382	FE F0                   CPI 0F0H

0384	C4 9B 06                CNZ CPUER   ;TEST "ADD" B,C,D,E,H,L,A

0387	90                      SUB B

0388	91                      SUB C

0389	92                      SUB D

038A	93                      SUB E

038B	94                      SUB H

038C	95                      SUB L

038D	FE 78                   CPI 078H

038F	C4 9B 06                CNZ CPUER   ;TEST "SUB" B,C,D,E,H,L

0392	97                      SUB A

0393	C4 9B 06                CNZ CPUER   ;TEST "SUB" A

0396	3E 80                   MVI A,080H

0398	87                      ADD A

0399	06 01                   MVI B,001H

039B	0E 02                   MVI C,002H

039D	16 03                   MVI D,003H

039F	1E 04                   MVI E,004H

03A1	26 05                   MVI H,005H

03A3	2E 06                   MVI L,006H

03A5	88                      ADC B

03A6	06 80                   MVI B,080H

03A8	80                      ADD B

03A9	80                      ADD B

03AA	89                      ADC C

03AB	80                      ADD B

03AC	80                      ADD B

03AD	8A                      ADC D

03AE	80                      ADD B

03AF	80                      ADD B

03B0	8B                      ADC E

03B1	80                      ADD B

03B2	80                      ADD B

03B3	8C                      ADC H

03B4	80                      ADD B

03B5	80                      ADD B

03B6	8D                      ADC L

03B7	80                      ADD B

03B8	80                      ADD B

03B9	8F                      ADC A

03BA	FE 37                   CPI 037H

03BC	C4 9B 06                CNZ CPUER   ;TEST "ADC" B,C,D,E,H,L,A

03BF	3E 80                   MVI A,080H

03C1	87                      ADD A

03C2	06 01                   MVI B,001H

03C4	98                      SBB B

03C5	06 FF                   MVI B,0FFH

03C7	80                      ADD B

03C8	99                      SBB C

03C9	80                      ADD B

03CA	9A                      SBB D

03CB	80                      ADD B

03CC	9B                      SBB E

03CD	80                      ADD B

03CE	9C                      SBB H

03CF	80                      ADD B

03D0	9D                      SBB L

03D1	FE E0                   CPI 0E0H

03D3	C4 9B 06                CNZ CPUER   ;TEST "SBB" B,C,D,E,H,L

03D6	3E 80                   MVI A,080H

03D8	87                      ADD A

03D9	9F                      SBB A

03DA	FE FF                   CPI 0FFH

03DC	C4 9B 06                CNZ CPUER   ;TEST "SBB" A

03DF	3E FF                   MVI A,0FFH

03E1	06 FE                   MVI B,0FEH

03E3	0E FC                   MVI C,0FCH

03E5	16 EF                   MVI D,0EFH

03E7	1E 7F                   MVI E,07FH

03E9	26 F4                   MVI H,0F4H

03EB	2E BF                   MVI L,0BFH

03ED	A7                      ANA A

03EE	A1                      ANA C

03EF	A2                      ANA D

03F0	A3                      ANA E

03F1	A4                      ANA H

03F2	A5                      ANA L

03F3	A7                      ANA A

03F4	FE 24                   CPI 024H

03F6	C4 9B 06                CNZ CPUER   ;TEST "ANA" B,C,D,E,H,L,A

03F9	AF                      XRA A

03FA	06 01                   MVI B,001H

03FC	0E 02                   MVI C,002H

03FE	16 04                   MVI D,004H

0400	1E 08                   MVI E,008H

0402	26 10                   MVI H,010H

0404	2E 20                   MVI L,020H

0406	B0                      ORA B

0407	B1                      ORA C

0408	B2                      ORA D

0409	B3                      ORA E

040A	B4                      ORA H

040B	B5                      ORA L

040C	B7                      ORA A

040D	FE 3F                   CPI 03FH

040F	C4 9B 06                CNZ CPUER   ;TEST "ORA" B,C,D,E,H,L,A

0412	3E 00                   MVI A,000H

0414	26 8F                   MVI H,08FH

0416	2E 4F                   MVI L,04FH

0418	A8                      XRA B

0419	A9                      XRA C

041A	AA                      XRA D

041B	AB                      XRA E

041C	AC                      XRA H

041D	AD                      XRA L

041E	FE CF                   CPI 0CFH

0420	C4 9B 06                CNZ CPUER   ;TEST "XRA" B,C,D,E,H,L

0423	AF                      XRA A

0424	C4 9B 06                CNZ CPUER   ;TEST "XRA" A

0427	06 44                   MVI B,044H

0429	0E 45                   MVI C,045H

042B	16 46                   MVI D,046H

042D	1E 47                   MVI E,047H

042F	26 06                   MVI H,(TEMP0/0FFH)  ;HIGH BYTE OF TEST MEMORY LOCATION

0431	2E B8                   MVI L,(TEMP0&0FFH)  ;LOW BYTE OF TEST MEMORY LOCATION

0433	70                      MOV M,B

0434	06 00                   MVI B,000H

0436	46                      MOV B,M

0437	3E 44                   MVI A,044H

0439	B8                      CMP B

043A	C4 9B 06                CNZ CPUER   ;TEST "MOV" M,B AND B,M

043D	72                      MOV M,D

043E	16 00                   MVI D,000H

0440	56                      MOV D,M

0441	3E 46                   MVI A,046H

0443	BA                      CMP D

0444	C4 9B 06                CNZ CPUER   ;TEST "MOV" M,D AND D,M

0447	73                      MOV M,E

0448	1E 00                   MVI E,000H

044A	5E                      MOV E,M

044B	3E 47                   MVI A,047H

044D	BB                      CMP E

044E	C4 9B 06                CNZ CPUER   ;TEST "MOV" M,E AND E,M

0451	74                      MOV M,H

0452	26 06                   MVI H,(TEMP0/0FFH)

0454	2E B8                   MVI L,(TEMP0&0FFH)

0456	66                      MOV H,M

0457	3E 06                   MVI A,(TEMP0/0FFH)

0459	BC                      CMP H

045A	C4 9B 06                CNZ CPUER   ;TEST "MOV" M,H AND H,M

045D	75                      MOV M,L

045E	26 06                   MVI H,(TEMP0/0FFH)

0460	2E B8                   MVI L,(TEMP0&0FFH)

0462	6E                      MOV L,M

0463	3E B8                   MVI A,(TEMP0&0FFH)

0465	BD                      CMP L

0466	C4 9B 06                CNZ CPUER   ;TEST "MOV" M,L AND L,M

0469	26 06                   MVI H,(TEMP0/0FFH)

046B	2E B8                   MVI L,(TEMP0&0FFH)

046D	3E 32                   MVI A,032H

046F	77                      MOV M,A

0470	BE                      CMP M

0471	C4 9B 06                CNZ CPUER   ;TEST "MOV" M,A

0474	86                      ADD M

0475	FE 64                   CPI 064H

0477	C4 9B 06                CNZ CPUER   ;TEST "ADD" M

047A	AF                      XRA A

047B	7E                      MOV A,M

047C	FE 32                   CPI 032H

047E	C4 9B 06                CNZ CPUER   ;TEST "MOV" A,M

0481	26 06                   MVI H,(TEMP0/0FFH)

0483	2E B8                   MVI L,(TEMP0&0FFH)

0485	7E                      MOV A,M

0486	96                      SUB M

0487	C4 9B 06                CNZ CPUER   ;TEST "SUB" M

048A	3E 80                   MVI A,080H

048C	87                      ADD A

048D	8E                      ADC M

048E	FE 33                   CPI 033H

0490	C4 9B 06                CNZ CPUER   ;TEST "ADC" M

0493	3E 80                   MVI A,080H

0495	87                      ADD A

0496	9E                      SBB M

0497	FE CD                   CPI 0CDH

0499	C4 9B 06                CNZ CPUER   ;TEST "SBB" M

049C	A6                      ANA M

049D	C4 9B 06                CNZ CPUER   ;TEST "ANA" M

04A0	3E 25                   MVI A,025H

04A2	B6                      ORA M

04A3	FE 37                   CPI 037H

04A5	C4 9B 06                CNZ CPUER   ;TEST "ORA" M

04A8	AE                      XRA M

04A9	FE 05                   CPI 005H

04AB	C4 9B 06                CNZ CPUER   ;TEST "XRA" M

04AE	36 55                   MVI M,055H

04B0	34                      INR M

04B1	35                      DCR M

04B2	86                      ADD M

04B3	FE 5A                   CPI 05AH

04B5	C4 9B 06                CNZ CPUER   ;TEST "INR","DCR",AND "MVI" M

04B8	01 FF 12                LXI B,12FFH

04BB	11 FF 12                LXI D,12FFH

04BE	21 FF 12                LXI H,12FFH

04C1	03                      INX B

04C2	13                      INX D

04C3	23                      INX H

04C4	3E 13                   MVI A,013H

04C6	B8                      CMP B

04C7	C4 9B 06                CNZ CPUER   ;TEST "LXI" AND "INX" B

04CA	BA                      CMP D

04CB	C4 9B 06                CNZ CPUER   ;TEST "LXI" AND "INX" D

04CE	BC                      CMP H

04CF	C4 9B 06                CNZ CPUER   ;TEST "LXI" AND "INX" H

04D2	3E 00                   MVI A,000H

04D4	B9                      CMP C

04D5	C4 9B 06                CNZ CPUER   ;TEST "LXI" AND "INX" B

04D8	BB                      CMP E

04D9	C4 9B 06                CNZ CPUER   ;TEST "LXI" AND "INX" D

04DC	BD                      CMP L

04DD	C4 9B 06                CNZ CPUER   ;TEST "LXI" AND "INX" H

04E0	0B                      DCX B

04E1	1B                      DCX D

04E2	2B                      DCX H

04E3	3E 12                   MVI A,012H

04E5	B8                      CMP B

04E6	C4 9B 06                CNZ CPUER   ;TEST "DCX" B

04E9	BA                      CMP D

04EA	C4 9B 06                CNZ CPUER   ;TEST "DCX" D

04ED	BC                      CMP H

04EE	C4 9B 06                CNZ CPUER   ;TEST "DCX" H

04F1	3E FF                   MVI A,0FFH

04F3	B9                      CMP C

04F4	C4 9B 06                CNZ CPUER   ;TEST "DCX" B

04F7	BB                      CMP E

04F8	C4 9B 06                CNZ CPUER   ;TEST "DCX" D

04FB	BD                      CMP L

04FC	C4 9B 06                CNZ CPUER   ;TEST "DCX" H

04FF	32 B8 06                STA TEMP0

0502	AF                      XRA A

0503	3A B8 06                LDA TEMP0

0506	FE FF                   CPI 0FFH

0508	C4 9B 06                CNZ CPUER   ;TEST "LDA" AND "STA"

050B	2A B6 06                LHLD    TEMPP

050E	22 B8 06                SHLD    TEMP0

0511	3A B6 06                LDA TEMPP

0514	47                      MOV B,A

0515	3A B8 06                LDA TEMP0

0518	B8                      CMP B

0519	C4 9B 06                CNZ CPUER   ;TEST "LHLD" AND "SHLD"

051C	3A B7 06                LDA TEMPP+1

051F	47                      MOV B,A

0520	3A B9 06                LDA TEMP0+1

0523	B8                      CMP B

0524	C4 9B 06                CNZ CPUER   ;TEST "LHLD" AND "SHLD"

0527	3E AA                   MVI A,0AAH

0529	32 B8 06                STA TEMP0

052C	44                      MOV B,H

052D	4D                      MOV C,L

052E	AF                      XRA A

052F	0A                      LDAX    B

0530	FE AA                   CPI 0AAH

0532	C4 9B 06                CNZ CPUER   ;TEST "LDAX" B

0535	3C                      INR A

0536	02                      STAX    B

0537	3A B8 06                LDA TEMP0

053A	FE AB                   CPI 0ABH

053C	C4 9B 06                CNZ CPUER   ;TEST "STAX" B

053F	3E 77                   MVI A,077H

0541	32 B8 06                STA TEMP0

0544	2A B6 06                LHLD    TEMPP

0547	11 00 00                LXI D,00000H

054A	EB                      XCHG

054B	AF                      XRA A

054C	1A                      LDAX    D

054D	FE 77                   CPI 077H

054F	C4 9B 06                CNZ CPUER   ;TEST "LDAX" D AND "XCHG"

0552	AF                      XRA A

0553	84                      ADD H

0554	85                      ADD L

0555	C4 9B 06                CNZ CPUER   ;TEST "XCHG"

0558	3E CC                   MVI A,0CCH

055A	12                      STAX    D

055B	3A B8 06                LDA TEMP0

055E	FE CC                   CPI 0CCH

0560	12                      STAX    D

0561	3A B8 06                LDA TEMP0

0564	FE CC                   CPI 0CCH

0566	C4 9B 06                CNZ CPUER   ;TEST "STAX" D

0569	21 77 77                LXI H,07777H

056C	29                      DAD H

056D	3E EE                   MVI A,0EEH

056F	BC                      CMP H

0570	C4 9B 06                CNZ CPUER   ;TEST "DAD" H

0573	BD                      CMP L

0574	C4 9B 06                CNZ CPUER   ;TEST "DAD" H

0577	21 55 55                LXI H,05555H

057A	01 FF FF                LXI B,0FFFFH

057D	09                      DAD B

057E	3E 55                   MVI A,055H

0580	D4 9B 06                CNC CPUER   ;TEST "DAD" B

0583	BC                      CMP H

0584	C4 9B 06                CNZ CPUER   ;TEST "DAD" B

0587	3E 54                   MVI A,054H

0589	BD                      CMP L

058A	C4 9B 06                CNZ CPUER   ;TEST "DAD" B

058D	21 AA AA                LXI H,0AAAAH

0590	11 33 33                LXI D,03333H

0593	19                      DAD D

0594	3E DD                   MVI A,0DDH

0596	BC                      CMP H

0597	C4 9B 06                CNZ CPUER   ;TEST "DAD" D

059A	BD                      CMP L

059B	C4 9B 06                CNZ CPUER   ;TEST "DAD" B

059E	37                      STC

059F	D4 9B 06                CNC CPUER   ;TEST "STC"

05A2	3F                      CMC

05A3	DC 9B 06                CC  CPUER   ;TEST "CMC

05A6	3E AA                   MVI A,0AAH

05A8	2F                      CMA 

05A9	FE 55                   CPI 055H

05AB	C4 9B 06                CNZ CPUER   ;TEST "CMA"

05AE	B7                      ORA A   ;RE-SET AUXILIARY CARRY

05AF	27                      DAA

05B0	FE 55                   CPI 055H

05B2	C4 9B 06                CNZ CPUER   ;TEST "DAA"

05B5	3E 88                   MVI A,088H

05B7	87                      ADD A

05B8	27                      DAA

05B9	FE 76                   CPI 076H

05BB	C4 9B 06                CNZ CPUER   ;TEST "DAA"

05BE	AF                      XRA A

05BF	3E AA                   MVI A,0AAH

05C1	27                      DAA

05C2	D4 9B 06                CNC CPUER   ;TEST "DAA"

05C5	FE 10                   CPI 010H

05C7	C4 9B 06                CNZ CPUER   ;TEST "DAA"

05CA	AF                      XRA A

05CB	3E 9A                   MVI A,09AH

05CD	27                      DAA

05CE	D4 9B 06                CNC CPUER   ;TEST "DAA"

05D1	C4 9B 06                CNZ CPUER   ;TEST "DAA"

05D4	37                      STC

05D5	3E 42                   MVI A,042H

05D7	07                      RLC

05D8	DC 9B 06                CC  CPUER   ;TEST "RLC" FOR RE-SET CARRY

05DB	07                      RLC

05DC	D4 9B 06                CNC CPUER   ;TEST "RLC" FOR SET CARRY

05DF	FE 09                   CPI 009H

05E1	C4 9B 06                CNZ CPUER   ;TEST "RLC" FOR ROTATION

05E4	0F                      RRC

05E5	D4 9B 06                CNC CPUER   ;TEST "RRC" FOR SET CARRY

05E8	0F                      RRC

05E9	FE 42                   CPI 042H

05EB	C4 9B 06                CNZ CPUER   ;TEST "RRC" FOR ROTATION

05EE	17                      RAL

05EF	17                      RAL

05F0	D4 9B 06                CNC CPUER   ;TEST "RAL" FOR SET CARRY

05F3	FE 08                   CPI 008H

05F5	C4 9B 06                CNZ CPUER   ;TEST "RAL" FOR ROTATION

05F8	1F                      RAR

05F9	1F                      RAR

05FA	DC 9B 06                CC  CPUER   ;TEST "RAR" FOR RE-SET CARRY

05FD	FE 02                   CPI 002H

05FF	C4 9B 06                CNZ CPUER   ;TEST "RAR" FOR ROTATION

0602	01 34 12                LXI B,01234H

0605	11 AA AA                LXI D,0AAAAH

0608	21 55 55                LXI H,05555H

060B	AF                      XRA A

060C	C5                      PUSH    B

060D	D5                      PUSH    D

060E	E5                      PUSH    H

060F	F5                      PUSH    PSW

0610	01 00 00                LXI B,00000H

0613	11 00 00                LXI D,00000H

0616	21 00 00                LXI H,00000H

0619	3E C0                   MVI A,0C0H

061B	C6 F0                   ADI 0F0H

061D	F1                      POP PSW

061E	E1                      POP H

061F	D1                      POP D

0620	C1                      POP B

0621	DC 9B 06                CC  CPUER   ;TEST "PUSH PSW" AND "POP PSW"

0624	C4 9B 06                CNZ CPUER   ;TEST "PUSH PSW" AND "POP PSW"

0627	E4 9B 06                CPO CPUER   ;TEST "PUSH PSW" AND "POP PSW"

062A	FC 9B 06                CM  CPUER   ;TEST "PUSH PSW" AND "POP PSW"

062D	3E 12                   MVI A,012H

062F	B8                      CMP B

0630	C4 9B 06                CNZ CPUER   ;TEST "PUSH B" AND "POP B"

0633	3E 34                   MVI A,034H

0635	B9                      CMP C

0636	C4 9B 06                CNZ CPUER   ;TEST "PUSH B" AND "POP B"

0639	3E AA                   MVI A,0AAH

063B	BA                      CMP D

063C	C4 9B 06                CNZ CPUER   ;TEST "PUSH D" AND "POP D"

063F	BB                      CMP E

0640	C4 9B 06                CNZ CPUER   ;TEST "PUSH D" AND "POP D"

0643	3E 55                   MVI A,055H

0645	BC                      CMP H

0646	C4 9B 06                CNZ CPUER   ;TEST "PUSH H" AND "POP H"

0649	BD                      CMP L

064A	C4 9B 06                CNZ CPUER   ;TEST "PUSH H" AND "POP H"

064D	21 00 00                LXI H,00000H

0650	39                      DAD SP

0651	22 BD 06                SHLD    SAVSTK  ;SAVE THE "OLD" STACK-POINTER!

0654	31 BC 06                LXI SP,TEMP4

0657	3B                      DCX SP

0658	3B                      DCX SP

0659	33                      INX SP

065A	3B                      DCX SP

065B	3E 55                   MVI A,055H

065D	32 BA 06                STA TEMP2

0660	2F                      CMA

0661	32 BB 06                STA TEMP3

0664	C1                      POP B

0665	B8                      CMP B

0666	C4 9B 06                CNZ CPUER   ;TEST "LXI","DAD","INX",AND "DCX" SP

0669	2F                      CMA

066A	B9                      CMP C

066B	C4 9B 06                CNZ CPUER   ;TEST "LXI","DAD","INX", AND "DCX" SP

066E	21 BC 06                LXI H,TEMP4

0671	F9                      SPHL

0672	21 33 77                LXI H,07733H

0675	3B                      DCX SP

0676	3B                      DCX SP

0677	E3                      XTHL

0678	3A BB 06                LDA TEMP3

067B	FE 77                   CPI 077H

067D	C4 9B 06                CNZ CPUER   ;TEST "SPHL" AND "XTHL"

0680	3A BA 06                LDA TEMP2

0683	FE 33                   CPI 033H

0685	C4 9B 06                CNZ CPUER   ;TEST "SPHL" AND "XTHL"

0688	3E 55                   MVI A,055H

068A	BD                      CMP L

068B	C4 9B 06                CNZ CPUER   ;TEST "SPHL" AND "XTHL"

068E	2F                      CMA

068F	BC                      CMP H

0690	C4 9B 06                CNZ CPUER   ;TEST "SPHL" AND "XTHL"

0693	2A BD 06                LHLD    SAVSTK  ;RESTORE THE "OLD" STACK-POINTER

0696	F9                      SPHL

0697	21 AD 06                LXI H,CPUOK

069A	E9                      PCHL        ;TEST "PCHL"

	                ;

	                ;

	                ;

069B	21 9E 01        CPUER:  LXI H,NGCPU ;OUTPUT "CPU HAS FAILED    ERROR EXIT=" TO CONSOLE

069E	CD 51 01                CALL    MSG

06A1	E3                      XTHL

06A2	7C                      MOV A,H

06A3	CD 69 01                CALL    BYTEO   ;SHOW ERROR EXIT ADDRESS HIGH BYTE

06A6	7D                      MOV A,L

06A7	CD 69 01                CALL    BYTEO   ;SHOW ERROR EXIT ADDRESS LOW BYTE

06AA	C3 4E 01                JMP WBOOT   ;EXIT TO CP/M WARM BOOT

	                ;

	                ;

	                ;

06AD	21 89 01        CPUOK:  LXI H,OKCPU ;OUTPUT "CPU IS OPERATIONAL" TO CONSOLE

06B0	CD 51 01                CALL    MSG

06B3	C3 4E 01                JMP WBOOT   ;EXIT TO CP/M WARM BOOT

	                ;

	                ;

	                ;

06B6	B8 06           TEMPP:  DW  TEMP0   ;POINTER USED TO TEST "LHLD","SHLD",

	                            ; AND "LDAX" INSTRUCTIONS

	                ;

06B8	00              TEMP0:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS

06B9	00              TEMP1:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS

06BA	00              TEMP2   DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS

06BB	00              TEMP3:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS

06BC	00              TEMP4:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS

06BD	00 00           SAVSTK: DS  2   ;TEMPORARY STACK-POINTER STORAGE LOCATION

	                ;

	                ;

	                ;

	                STACK   EQU TEMPP+256   ;DE-BUG STACK POINTER STORAGE AREA

	                ;

	                        END

Labels:

acii                    0257aimm                    023Canii                    027Bbdos                    0005
byteo                   0169byto1                   0179byto2                   017Dbyto3                   0186
c010                    0299c020                    02AFc030                    02C5cci                     030E
cmi                     02EAcnci                    0302cnzi                    031Acpei                    02DE
cpie                    0254cpoi                    02D2cpu                     01BDcpuer                   069B
cpuok                   06ADczi                     0326end                     06BFj010                    01C8
j020                    01CEj030                    01D4j040                    01DAj050                    01E9
j060                    01ECj070                    01F4j080                    01FDj090                    0200
j100                    0208j110                    0211j120                    0214j130                    021C
j140                    0225j150                    0228j160                    0230j170                    0239
lolz                    0109movi                    032Fmsg                     0151ngcpu                   019E
okcpu                   0189orii                    0285pchar                   015Csavstk                  06BD
sbii                    026Fstack                   06BFsuii                    0263tcpi                    02F6
temp0                   06B8temp1                   06B9temp2                   06BAtemp3                   06BB
temp4                   06BCtempp                   06B6wboot                   014Exrii                    028F

 

Memory dump:

0100:  21 09 01 CD 51 01 C3 BD-01 4D 49 43 52 4F 43 4F  !...Q....MICROCO


0110:  53 4D 20 41 53 53 4F 43-49 41 54 45 53 20 38 30  SM.ASSOCIATES.80


0120:  38 30 2F 38 30 38 35 20-43 50 55 20 44 49 41 47  80/8085.CPU.DIAG


0130:  4E 4F 53 54 49 43 20 56-45 52 53 49 4F 4E 20 31  NOSTIC.VERSION.1


0140:  2E 30 20 28 43 29 20 31-39 38 30 0D 0A 24 C3 00  .0.(C).1980..$..


0150:  00 7E FE 24 C8 CD 5C 01-23 C3 51 01 F5 D5 E5 5F  .~.$..\.#.Q...._


0160:  0E 02 CD 05 00 E1 D1 F1-C9 F5 CD 79 01 5F CD 5C  ...........y._.\


0170:  01 F1 CD 7D 01 5F C3 5C-01 0F 0F 0F 0F E6 0F FE  ...}._.\........


0180:  0A FA 86 01 C6 07 C6 30-C9 0D 0A 43 50 55 20 49  .......0...CPU.I


0190:  53 20 4F 50 45 52 41 54-49 4F 4E 41 4C 24 0D 0A  S.OPERATIONAL$..


01A0:  20 43 50 55 20 48 41 53-20 46 41 49 4C 45 44 21  .CPU.HAS.FAILED!


01B0:  20 45 52 52 4F 52 20 45-58 49 54 3D 24 31 BF 06  .ERROR.EXIT=$1..


01C0:  E6 00 CA C8 01 CD 9B 06-D2 CE 01 CD 9B 06 EA D4  ................


01D0:  01 CD 9B 06 F2 DA 01 CD-9B 06 C2 E9 01 DA E9 01  ................


01E0:  E2 E9 01 FA E9 01 C3 EC-01 CD 9B 06 C6 06 C2 F4  ................


01F0:  01 CD 9B 06 DA FD 01 E2-FD 01 F2 00 02 CD 9B 06  ................


0200:  C6 70 E2 08 02 CD 9B 06-FA 11 02 CA 11 02 D2 14  .p..............


0210:  02 CD 9B 06 C6 81 FA 1C-02 CD 9B 06 CA 25 02 DA  .............%..


0220:  25 02 E2 28 02 CD 9B 06-C6 FE DA 30 02 CD 9B 06  %..(.......0....


0230:  CA 39 02 E2 39 02 FA 3C-02 CD 9B 06 FE 00 DA 54  .9..9..<.......T


0240:  02 CA 54 02 FE F5 DA 54-02 C2 54 02 FE FF CA 54  ..T....T..T....T


0250:  02 DA 57 02 CD 9B 06 CE-0A CE 0A FE 0B CA 63 02  ..W...........c.


0260:  CD 9B 06 D6 0C D6 0F FE-F0 CA 6F 02 CD 9B 06 DE  ..........o.....


0270:  F1 DE 0E FE F0 CA 7B 02-CD 9B 06 E6 55 FE 50 CA  ......{.....U.P.


0280:  85 02 CD 9B 06 F6 3A FE-7A CA 8F 02 CD 9B 06 EE  ......:.z.......


0290:  0F FE 75 CA 99 02 CD 9B-06 E6 00 DC 9B 06 E4 9B  ..u.............


02A0:  06 FC 9B 06 C4 9B 06 FE-00 CA AF 02 CD 9B 06 D6  ................


02B0:  77 D4 9B 06 EC 9B 06 F4-9B 06 CC 9B 06 FE 89 CA  w...............


02C0:  C5 02 CD 9B 06 E6 FF E4-D2 02 FE D9 CA 2F 03 CD  ............./..


02D0:  9B 06 E8 C6 10 EC DE 02-C6 02 E0 CD 9B 06 E0 C6  ................


02E0:  20 FC EA 02 C6 04 E8 CD-9B 06 F0 C6 80 F4 F6 02  ................


02F0:  C6 80 F8 CD 9B 06 F8 C6-40 D4 02 03 C6 40 F0 CD  ........@....@..


0300:  9B 06 D8 C6 8F DC 0E 03-D6 02 D0 CD 9B 06 D0 C6  ................


0310:  F7 C4 1A 03 C6 FE D8 CD-9B 06 C8 C6 01 CC 26 03  ..............&.


0320:  C6 D0 C0 CD 9B 06 C0 C6-47 FE 47 C8 CD 9B 06 3E  ........G.G....>


0330:  77 3C 47 04 48 0D 51 5A-63 6C 7D 3D 4F 59 6B 45  w

0340:  50 62 7C 57 14 6A 4D 0C-61 44 05 58 7B 5F 1C 43  Pb|W.jM.aD.X{_.C


0350:  60 24 4C 69 55 15 7A 67-25 54 42 68 2C 5D 1D 4B  `$LiU.zg%TBh,].K


0360:  79 6F 2D 65 5C 53 4A 41-78 FE 77 C4 9B 06 AF 06  yo-e\SJAx.w.....


0370:  01 0E 03 16 07 1E 0F 26-1F 2E 3F 80 81 82 83 84  .......&..?.....


0380:  85 87 FE F0 C4 9B 06 90-91 92 93 94 95 FE 78 C4  ..............x.


0390:  9B 06 97 C4 9B 06 3E 80-87 06 01 0E 02 16 03 1E  ......>.........


03A0:  04 26 05 2E 06 88 06 80-80 80 89 80 80 8A 80 80  .&..............


03B0:  8B 80 80 8C 80 80 8D 80-80 8F FE 37 C4 9B 06 3E  ...........7...>


03C0:  80 87 06 01 98 06 FF 80-99 80 9A 80 9B 80 9C 80  ................


03D0:  9D FE E0 C4 9B 06 3E 80-87 9F FE FF C4 9B 06 3E  ......>........>


03E0:  FF 06 FE 0E FC 16 EF 1E-7F 26 F4 2E BF A7 A1 A2  .........&......


03F0:  A3 A4 A5 A7 FE 24 C4 9B-06 AF 06 01 0E 02 16 04  .....$..........


0400:  1E 08 26 10 2E 20 B0 B1-B2 B3 B4 B5 B7 FE 3F C4  ..&...........?.


0410:  9B 06 3E 00 26 8F 2E 4F-A8 A9 AA AB AC AD FE CF  ..>.&..O........


0420:  C4 9B 06 AF C4 9B 06 06-44 0E 45 16 46 1E 47 26  ........D.E.F.G&


0430:  06 2E B8 70 06 00 46 3E-44 B8 C4 9B 06 72 16 00  ...p..F>D....r..


0440:  56 3E 46 BA C4 9B 06 73-1E 00 5E 3E 47 BB C4 9B  V>F....s..^>G...


0450:  06 74 26 06 2E B8 66 3E-06 BC C4 9B 06 75 26 06  .t&...f>.....u&.


0460:  2E B8 6E 3E B8 BD C4 9B-06 26 06 2E B8 3E 32 77  ..n>.....&...>2w


0470:  BE C4 9B 06 86 FE 64 C4-9B 06 AF 7E FE 32 C4 9B  ......d....~.2..


0480:  06 26 06 2E B8 7E 96 C4-9B 06 3E 80 87 8E FE 33  .&...~....>....3


0490:  C4 9B 06 3E 80 87 9E FE-CD C4 9B 06 A6 C4 9B 06  ...>............


04A0:  3E 25 B6 FE 37 C4 9B 06-AE FE 05 C4 9B 06 36 55  >%..7.........6U


04B0:  34 35 86 FE 5A C4 9B 06-01 FF 12 11 FF 12 21 FF  45..Z.........!.


04C0:  12 03 13 23 3E 13 B8 C4-9B 06 BA C4 9B 06 BC C4  ...#>...........


04D0:  9B 06 3E 00 B9 C4 9B 06-BB C4 9B 06 BD C4 9B 06  ..>.............


04E0:  0B 1B 2B 3E 12 B8 C4 9B-06 BA C4 9B 06 BC C4 9B  ..+>............


04F0:  06 3E FF B9 C4 9B 06 BB-C4 9B 06 BD C4 9B 06 32  .>.............2


0500:  B8 06 AF 3A B8 06 FE FF-C4 9B 06 2A B6 06 22 B8  ...:.......*..".


0510:  06 3A B6 06 47 3A B8 06-B8 C4 9B 06 3A B7 06 47  .:..G:......:..G


0520:  3A B9 06 B8 C4 9B 06 3E-AA 32 B8 06 44 4D AF 0A  :......>.2..DM..


0530:  FE AA C4 9B 06 3C 02 3A-B8 06 FE AB C4 9B 06 3E  .....<.:.......>


0540:  77 32 B8 06 2A B6 06 11-00 00 EB AF 1A FE 77 C4  w2..*.........w.


0550:  9B 06 AF 84 85 C4 9B 06-3E CC 12 3A B8 06 FE CC  ........>..:....


0560:  12 3A B8 06 FE CC C4 9B-06 21 77 77 29 3E EE BC  .:.......!ww)>..


0570:  C4 9B 06 BD C4 9B 06 21-55 55 01 FF FF 09 3E 55  .......!UU....>U


0580:  D4 9B 06 BC C4 9B 06 3E-54 BD C4 9B 06 21 AA AA  .......>T....!..


0590:  11 33 33 19 3E DD BC C4-9B 06 BD C4 9B 06 37 D4  .33.>.........7.


05A0:  9B 06 3F DC 9B 06 3E AA-2F FE 55 C4 9B 06 B7 27  ..?...>./.U....'


05B0:  FE 55 C4 9B 06 3E 88 87-27 FE 76 C4 9B 06 AF 3E  .U...>..'.v....>


05C0:  AA 27 D4 9B 06 FE 10 C4-9B 06 AF 3E 9A 27 D4 9B  .'.........>.'..


05D0:  06 C4 9B 06 37 3E 42 07-DC 9B 06 07 D4 9B 06 FE  ....7>B.........


05E0:  09 C4 9B 06 0F D4 9B 06-0F FE 42 C4 9B 06 17 17  ..........B.....


05F0:  D4 9B 06 FE 08 C4 9B 06-1F 1F DC 9B 06 FE 02 C4  ................


0600:  9B 06 01 34 12 11 AA AA-21 55 55 AF C5 D5 E5 F5  ...4....!UU.....


0610:  01 00 00 11 00 00 21 00-00 3E C0 C6 F0 F1 E1 D1  ......!..>......


0620:  C1 DC 9B 06 C4 9B 06 E4-9B 06 FC 9B 06 3E 12 B8  .............>..


0630:  C4 9B 06 3E 34 B9 C4 9B-06 3E AA BA C4 9B 06 BB  ...>4....>......


0640:  C4 9B 06 3E 55 BC C4 9B-06 BD C4 9B 06 21 00 00  ...>U........!..


0650:  39 22 BD 06 31 BC 06 3B-3B 33 3B 3E 55 32 BA 06  9"..1..;;3;>U2..


0660:  2F 32 BB 06 C1 B8 C4 9B-06 2F B9 C4 9B 06 21 BC  /2......./....!.


0670:  06 F9 21 33 77 3B 3B E3-3A BB 06 FE 77 C4 9B 06  ..!3w;;.:...w...


0680:  3A BA 06 FE 33 C4 9B 06-3E 55 BD C4 9B 06 2F BC  :...3...>U..../.


0690:  C4 9B 06 2A BD 06 F9 21-AD 06 E9 21 9E 01 CD 51  ...*...!...!...Q


06A0:  01 E3 7C CD 69 01 7D CD-69 01 C3 4E 01 21 89 01  ..|.i.}.i..N.!..


06B0:  CD 51 01 C3 4E 01 B8 06-00 00 00 00 00 00 00     .Q..N...........


 

Intel HEX:

cat >test.hex <<X
:20010000210901CD5101C3BD014D4943524F434F534D204153534F434941544553203830D1
:2001200038302F383038352043505520444941474E4F535449432056455253494F4E2031AF
:200140002E302028432920313938300D0A24C300007EFE24C8CD5C0123C35101F5D5E55FC5
:200160000E02CD0500E1D1F1C9F5CD79015FCD5C01F1CD7D015FC35C010F0F0F0FE60FFE82
:200180000AFA8601C607C630C90D0A435055204953204F5045524154494F4E414C240D0AF4
:2001A0002043505520484153204641494C454421204552524F5220455849543D2431BF06FA
:2001C000E600CAC801CD9B06D2CE01CD9B06EAD401CD9B06F2DA01CD9B06C2E901DAE90151
:2001E000E2E901FAE901C3EC01CD9B06C606C2F401CD9B06DAFD01E2FD01F20002CD9B0626
:20020000C670E20802CD9B06FA1102CA1102D21402CD9B06C681FA1C02CD9B06CA2502DA76
:200220002502E22802CD9B06C6FEDA3002CD9B06CA3902E23902FA3C02CD9B06FE00DA54EB
:2002400002CA5402FEF5DA5402C25402FEFFCA5402DA5702CD9B06CE0ACE0AFE0BCA63029B
:20026000CD9B06D60CD60FFEF0CA6F02CD9B06DEF1DE0EFEF0CA7B02CD9B06E655FE50CA01
:200280008502CD9B06F63AFE7ACA8F02CD9B06EE0FFE75CA9902CD9B06E600DC9B06E49BD3
:2002A00006FC9B06C49B06FE00CAAF02CD9B06D677D49B06EC9B06F49B06CC9B06FE89CAAD
:2002C000C502CD9B06E6FFE4D202FED9CA2F03CD9B06E8C610ECDE02C602E0CD9B06E0C6C5
:2002E00020FCEA02C604E8CD9B06F0C680F4F602C680F8CD9B06F8C640D40203C640F0CD6E
:200300009B06D8C68FDC0E03D602D0CD9B06D0C6F7C41A03C6FED8CD9B06C8C601CC260310
:20032000C6D0C0CD9B06C0C647FE47C8CD9B063E773C4704480D515A636C7D3D4F596B4594
:2003400050627C57146A4D0C614405587B5F1C4360244C6955157A67255442682C5D1D4B6E
:20036000796F2D655C534A4178FE77C49B06AF06010E0316071E0F261F2E3F80818283842A
:200380008587FEF0C49B06909192939495FE78C49B0697C49B063E808706010E0216031E25
:2003A0000426052E0688068080808980808A80808B80808C80808D80808FFE37C49B063EAE
:2003C000808706019806FF8099809A809B809C809DFEE0C49B063E80879FFEFFC49B063E24
:2003E000FF06FE0EFC16EF1E7F26F42EBFA7A1A2A3A4A5A7FE24C49B06AF06010E02160463
:200400001E0826102E20B0B1B2B3B4B5B7FE3FC49B063E00268F2E4FA8A9AAABACADFECF6E
:20042000C49B06AFC49B0606440E4516461E4726062EB8700600463E44B8C49B06721600F0
:20044000563E46BAC49B06731E005E3E47BBC49B067426062EB8663E06BCC49B067526061D
:200460002EB86E3EB8BDC49B0626062EB83E3277BEC49B0686FE64C49B06AF7EFE32C49BEB
:200480000626062EB87E96C49B063E80878EFE33C49B063E80879EFECDC49B06A6C49B0644
:2004A0003E25B6FE37C49B06AEFE05C49B063655343586FE5AC49B0601FF1211FF1221FFE8
:2004C000120313233E13B8C49B06BAC49B06BCC49B063E00B9C49B06BBC49B06BDC49B0685
:2004E0000B1B2B3E12B8C49B06BAC49B06BCC49B063EFFB9C49B06BBC49B06BDC49B06322F
:20050000B806AF3AB806FEFFC49B062AB60622B8063AB606473AB806B8C49B063AB70647BE
:200520003AB906B8C49B063EAA32B806444DAF0AFEAAC49B063C023AB806FEABC49B063EF4
:200540007732B8062AB606110000EBAF1AFE77C49B06AF8485C49B063ECC123AB806FECCB4
:20056000123AB806FECCC49B06217777293EEEBCC49B06BDC49B0621555501FFFF093E5535
:20058000D49B06BCC49B063E54BDC49B0621AAAA113333193EDDBCC49B06BDC49B0637D4A3
:2005A0009B063FDC9B063EAA2FFE55C49B06B727FE55C49B063E888727FE76C49B06AF3E3F
:2005C000AA27D49B06FE10C49B06AF3E9A27D49B06C49B06373E4207DC9B0607D49B06FE25
:2005E00009C49B060FD49B060FFE42C49B061717D49B06FE08C49B061F1FDC9B06FE02C4C8
:200600009B0601341211AAAA215555AFC5D5E5F50100001100002100003EC0C6F0F1E1D115
:20062000C1DC9B06C49B06E49B06FC9B063E12B8C49B063E34B9C49B063EAABAC49B06BB36
:20064000C49B063E55BCC49B06BDC49B062100003922BD0631BC063B3B333B3E5532BA06C4
:200660002F32BB06C1B8C49B062FB9C49B0621BC06F92133773B3BE33ABB06FE77C49B0658
:200680003ABA06FE33C49B063E55BDC49B062FBCC49B062ABD06F921AD06E9219E01CD5144
:1F06A00001E37CCD69017DCD6901C34E01218901CD5101C34E01B8060000000000000044
:00000001FF
X
gobjcopy -I ihex test.hex -O binary test.com
echo "Hooray!"

 

        ; 8080 assembler code
        .hexfile test.hex
        .binfile test.com
        ; try "hex" for downloading in hex format
        .download bin  
        .objcopy gobjcopy
        .postbuild echo "Hooray!"
        ;.nodump
bdos    equ 5
intv    equ 38h
        .org 100h
        jmp begin
        db 27
msg:
        db 'Assembled by Pretty 8080 Assembler',0dh,0ah,'$'
yeah: 	; large binary strings can be defined using base64
        db64 TG9uZyBiaW5hcnkgaW5pdGlhbGl6YXRpb24gc2VjdGlvbnMgY2FuIGJlIGRlZmluZWQgdXNpbmcgYmFzZTY0LWVuY29kZWQgc3RyaW5ncyENCiQ=
begin:
        lxi d, msg
        mvi c, 9
        call bdos
        call delay
        mvi c, 9
        lxi d, yeah
        call bdos
        ret

delay:
        mvi a, 33
        hlt
        dcr a
        jnz .-2
        ret

